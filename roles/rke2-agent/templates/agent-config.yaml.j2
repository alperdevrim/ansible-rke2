# RKE2 Agent Configuration
server: https://{{ hostvars[groups['rke2_servers'][0]]['ansible_default_ipv4']['address'] }}:9345
token: {{ hostvars[groups['rke2_servers'][0]]['rke2_node_token'] }}

# Data directory
data-dir: {{ rke2_data_dir }}

# Node configuration
node-name: {% if hostvars[inventory_hostname]['ansible_default_ipv4']['address'] == '10.68.22.61' %}worker-1{% elif hostvars[inventory_hostname]['ansible_default_ipv4']['address'] == '10.68.22.62' %}worker-2{% elif hostvars[inventory_hostname]['ansible_default_ipv4']['address'] == '10.68.22.63' %}worker-3{% else %}{{ inventory_hostname }}{% endif %}

# Node labels
{% if rke2_node_labels is defined and rke2_node_labels | length > 0 %}
node-label:
{% for label in rke2_node_labels %}
  - {{ label }}
{% endfor %}
{% endif %}

# Node taints
{% if rke2_node_taints is defined and rke2_node_taints | length > 0 %}
node-taint:
{% for taint in rke2_node_taints %}
  - {{ taint }}
{% endfor %}
{% endif %}